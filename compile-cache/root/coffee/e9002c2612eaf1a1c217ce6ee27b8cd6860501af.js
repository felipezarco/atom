(function() {
  var BLOCKQUOTE_REGEX, LIST_AL_REGEX, LIST_AL_TASK_REGEX, LIST_OL_REGEX, LIST_OL_TASK_REGEX, LIST_UL_REGEX, LIST_UL_TASK_REGEX, LineMeta, TYPES, incStr, utils;

  utils = require("../utils");

  LIST_UL_TASK_REGEX = /^(\s*)([*+-\.])\s+\[[xX ]\]\s*(.*)$/;

  LIST_UL_REGEX = /^(\s*)([*+-\.])\s+(.*)$/;

  LIST_OL_TASK_REGEX = /^(\s*)(\d+)([\.\)])\s+\[[xX ]\]\s*(.*)$/;

  LIST_OL_REGEX = /^(\s*)(\d+)([\.\)])\s+(.*)$/;

  LIST_AL_TASK_REGEX = /^(\s*)([a-zA-Z]+)([\.\)])\s+\[[xX ]\]\s*(.*)$/;

  LIST_AL_REGEX = /^(\s*)([a-zA-Z]+)([\.\)])\s+(.*)$/;

  BLOCKQUOTE_REGEX = /^(\s*)(>)\s*(.*)$/;

  incStr = function(str) {
    var num;
    num = parseInt(str, 10);
    if (isNaN(num)) {
      return utils.incrementChars(str);
    } else {
      return num + 1;
    }
  };

  TYPES = [
    {
      name: ["list", "ul", "task"],
      regex: LIST_UL_TASK_REGEX,
      lineHead: function(indent, head, suffix) {
        return "" + indent + head + " [ ] ";
      },
      defaultHead: function(head) {
        return head;
      }
    }, {
      name: ["list", "ul"],
      regex: LIST_UL_REGEX,
      lineHead: function(indent, head, suffix) {
        return "" + indent + head + " ";
      },
      defaultHead: function(head) {
        return head;
      }
    }, {
      name: ["list", "ol", "task"],
      regex: LIST_OL_TASK_REGEX,
      lineHead: function(indent, head, suffix) {
        return "" + indent + head + suffix + " [ ] ";
      },
      nextLine: function(indent, head, suffix) {
        return "" + indent + (incStr(head)) + suffix + " [ ] ";
      },
      defaultHead: function(head) {
        return "1";
      }
    }, {
      name: ["list", "ol"],
      regex: LIST_OL_REGEX,
      lineHead: function(indent, head, suffix) {
        return "" + indent + head + suffix + " ";
      },
      nextLine: function(indent, head, suffix) {
        return "" + indent + (incStr(head)) + suffix + " ";
      },
      defaultHead: function(head) {
        return "1";
      }
    }, {
      name: ["list", "ol", "al", "task"],
      regex: LIST_AL_TASK_REGEX,
      lineHead: function(indent, head, suffix) {
        return "" + indent + head + suffix + " [ ] ";
      },
      nextLine: function(indent, head, suffix) {
        return "" + indent + (incStr(head)) + suffix + " [ ] ";
      },
      defaultHead: function(head) {
        var c;
        c = utils.isUpperCase(head) ? "A" : "a";
        return head.replace(/./g, c);
      }
    }, {
      name: ["list", "ol", "al"],
      regex: LIST_AL_REGEX,
      lineHead: function(indent, head, suffix) {
        return "" + indent + head + suffix + " ";
      },
      nextLine: function(indent, head, suffix) {
        return "" + indent + (incStr(head)) + suffix + " ";
      },
      defaultHead: function(head) {
        var c;
        c = utils.isUpperCase(head) ? "A" : "a";
        return head.replace(/./g, c);
      }
    }, {
      name: ["blockquote"],
      regex: BLOCKQUOTE_REGEX,
      lineHead: function(indent, head, suffix) {
        return indent + "> ";
      },
      defaultHead: function(head) {
        return ">";
      }
    }
  ];

  module.exports = LineMeta = (function() {
    function LineMeta(line) {
      this.line = line;
      this.type = void 0;
      this.head = "";
      this.defaultHead = "";
      this.body = "";
      this.indent = "";
      this.nextLine = "";
      this._findMeta();
    }

    LineMeta.prototype._findMeta = function() {
      var i, len, matches, results, type;
      results = [];
      for (i = 0, len = TYPES.length; i < len; i++) {
        type = TYPES[i];
        if (matches = type.regex.exec(this.line)) {
          this.type = type;
          this.indent = matches[1];
          this.head = matches[2];
          this.defaultHead = type.defaultHead(matches[2]);
          this.suffix = matches.length >= 4 ? matches[3] : "";
          this.body = matches[matches.length - 1];
          this.nextLine = (type.nextLine || type.lineHead).call(null, this.indent, this.head, this.suffix);
          break;
        } else {
          results.push(void 0);
        }
      }
      return results;
    };

    LineMeta.prototype.lineHead = function(head) {
      return this.type.lineHead(this.indent, head, this.suffix);
    };

    LineMeta.prototype.isTaskList = function() {
      return this.type && this.type.name.indexOf("task") !== -1;
    };

    LineMeta.prototype.isList = function(type) {
      return this.type && this.type.name.indexOf("list") !== -1 && (!type || this.type.name.indexOf(type) !== -1);
    };

    LineMeta.prototype.isContinuous = function() {
      return !!this.nextLine;
    };

    LineMeta.prototype.isEmptyBody = function() {
      return !this.body;
    };

    LineMeta.prototype.isIndented = function() {
      return !!this.indent && this.indent.length > 0;
    };

    LineMeta.isList = function(line) {
      return LIST_UL_REGEX.test(line) || LIST_OL_REGEX.test(line) || LIST_AL_REGEX.test(line);
    };

    LineMeta.isOrderedList = function(line) {
      return LIST_OL_REGEX.test(line) || LIST_AL_REGEX.test(line);
    };

    LineMeta.isUnorderedList = function(line) {
      return LIST_UL_REGEX.test(line);
    };

    LineMeta.incStr = incStr;

    return LineMeta;

  })();

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL2hvbWUvZmVsaXBlLy5hdG9tL3BhY2thZ2VzL21hcmtkb3duLXdyaXRlci9saWIvaGVscGVycy9saW5lLW1ldGEuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQTs7RUFBQSxLQUFBLEdBQVEsT0FBQSxDQUFRLFVBQVI7O0VBRVIsa0JBQUEsR0FBcUI7O0VBQ3JCLGFBQUEsR0FBcUI7O0VBQ3JCLGtCQUFBLEdBQXFCOztFQUNyQixhQUFBLEdBQXFCOztFQUNyQixrQkFBQSxHQUFxQjs7RUFDckIsYUFBQSxHQUFxQjs7RUFDckIsZ0JBQUEsR0FBcUI7O0VBRXJCLE1BQUEsR0FBUyxTQUFDLEdBQUQ7QUFDUCxRQUFBO0lBQUEsR0FBQSxHQUFNLFFBQUEsQ0FBUyxHQUFULEVBQWMsRUFBZDtJQUNOLElBQUcsS0FBQSxDQUFNLEdBQU4sQ0FBSDthQUFtQixLQUFLLENBQUMsY0FBTixDQUFxQixHQUFyQixFQUFuQjtLQUFBLE1BQUE7YUFDSyxHQUFBLEdBQU0sRUFEWDs7RUFGTzs7RUFLVCxLQUFBLEdBQVE7SUFDTjtNQUNFLElBQUEsRUFBTSxDQUFDLE1BQUQsRUFBUyxJQUFULEVBQWUsTUFBZixDQURSO01BRUUsS0FBQSxFQUFPLGtCQUZUO01BR0UsUUFBQSxFQUFVLFNBQUMsTUFBRCxFQUFTLElBQVQsRUFBZSxNQUFmO2VBQTBCLEVBQUEsR0FBRyxNQUFILEdBQVksSUFBWixHQUFpQjtNQUEzQyxDQUhaO01BSUUsV0FBQSxFQUFhLFNBQUMsSUFBRDtlQUFVO01BQVYsQ0FKZjtLQURNLEVBT047TUFDRSxJQUFBLEVBQU0sQ0FBQyxNQUFELEVBQVMsSUFBVCxDQURSO01BRUUsS0FBQSxFQUFPLGFBRlQ7TUFHRSxRQUFBLEVBQVUsU0FBQyxNQUFELEVBQVMsSUFBVCxFQUFlLE1BQWY7ZUFBMEIsRUFBQSxHQUFHLE1BQUgsR0FBWSxJQUFaLEdBQWlCO01BQTNDLENBSFo7TUFJRSxXQUFBLEVBQWEsU0FBQyxJQUFEO2VBQVU7TUFBVixDQUpmO0tBUE0sRUFhTjtNQUNFLElBQUEsRUFBTSxDQUFDLE1BQUQsRUFBUyxJQUFULEVBQWUsTUFBZixDQURSO01BRUUsS0FBQSxFQUFPLGtCQUZUO01BR0UsUUFBQSxFQUFVLFNBQUMsTUFBRCxFQUFTLElBQVQsRUFBZSxNQUFmO2VBQTBCLEVBQUEsR0FBRyxNQUFILEdBQVksSUFBWixHQUFtQixNQUFuQixHQUEwQjtNQUFwRCxDQUhaO01BSUUsUUFBQSxFQUFVLFNBQUMsTUFBRCxFQUFTLElBQVQsRUFBZSxNQUFmO2VBQTBCLEVBQUEsR0FBRyxNQUFILEdBQVcsQ0FBQyxNQUFBLENBQU8sSUFBUCxDQUFELENBQVgsR0FBMkIsTUFBM0IsR0FBa0M7TUFBNUQsQ0FKWjtNQUtFLFdBQUEsRUFBYSxTQUFDLElBQUQ7ZUFBVTtNQUFWLENBTGY7S0FiTSxFQW9CTjtNQUNFLElBQUEsRUFBTSxDQUFDLE1BQUQsRUFBUyxJQUFULENBRFI7TUFFRSxLQUFBLEVBQU8sYUFGVDtNQUdFLFFBQUEsRUFBVSxTQUFDLE1BQUQsRUFBUyxJQUFULEVBQWUsTUFBZjtlQUEwQixFQUFBLEdBQUcsTUFBSCxHQUFZLElBQVosR0FBbUIsTUFBbkIsR0FBMEI7TUFBcEQsQ0FIWjtNQUlFLFFBQUEsRUFBVSxTQUFDLE1BQUQsRUFBUyxJQUFULEVBQWUsTUFBZjtlQUEwQixFQUFBLEdBQUcsTUFBSCxHQUFXLENBQUMsTUFBQSxDQUFPLElBQVAsQ0FBRCxDQUFYLEdBQTJCLE1BQTNCLEdBQWtDO01BQTVELENBSlo7TUFLRSxXQUFBLEVBQWEsU0FBQyxJQUFEO2VBQVU7TUFBVixDQUxmO0tBcEJNLEVBMkJOO01BQ0UsSUFBQSxFQUFNLENBQUMsTUFBRCxFQUFTLElBQVQsRUFBZSxJQUFmLEVBQXFCLE1BQXJCLENBRFI7TUFFRSxLQUFBLEVBQU8sa0JBRlQ7TUFHRSxRQUFBLEVBQVUsU0FBQyxNQUFELEVBQVMsSUFBVCxFQUFlLE1BQWY7ZUFBMEIsRUFBQSxHQUFHLE1BQUgsR0FBWSxJQUFaLEdBQW1CLE1BQW5CLEdBQTBCO01BQXBELENBSFo7TUFJRSxRQUFBLEVBQVUsU0FBQyxNQUFELEVBQVMsSUFBVCxFQUFlLE1BQWY7ZUFBMEIsRUFBQSxHQUFHLE1BQUgsR0FBVyxDQUFDLE1BQUEsQ0FBTyxJQUFQLENBQUQsQ0FBWCxHQUEyQixNQUEzQixHQUFrQztNQUE1RCxDQUpaO01BS0UsV0FBQSxFQUFhLFNBQUMsSUFBRDtBQUNYLFlBQUE7UUFBQSxDQUFBLEdBQU8sS0FBSyxDQUFDLFdBQU4sQ0FBa0IsSUFBbEIsQ0FBSCxHQUFnQyxHQUFoQyxHQUF5QztlQUM3QyxJQUFJLENBQUMsT0FBTCxDQUFhLElBQWIsRUFBbUIsQ0FBbkI7TUFGVyxDQUxmO0tBM0JNLEVBb0NOO01BQ0UsSUFBQSxFQUFNLENBQUMsTUFBRCxFQUFTLElBQVQsRUFBZSxJQUFmLENBRFI7TUFFRSxLQUFBLEVBQU8sYUFGVDtNQUdFLFFBQUEsRUFBVSxTQUFDLE1BQUQsRUFBUyxJQUFULEVBQWUsTUFBZjtlQUEwQixFQUFBLEdBQUcsTUFBSCxHQUFZLElBQVosR0FBbUIsTUFBbkIsR0FBMEI7TUFBcEQsQ0FIWjtNQUlFLFFBQUEsRUFBVSxTQUFDLE1BQUQsRUFBUyxJQUFULEVBQWUsTUFBZjtlQUEwQixFQUFBLEdBQUcsTUFBSCxHQUFXLENBQUMsTUFBQSxDQUFPLElBQVAsQ0FBRCxDQUFYLEdBQTJCLE1BQTNCLEdBQWtDO01BQTVELENBSlo7TUFLRSxXQUFBLEVBQWEsU0FBQyxJQUFEO0FBQ1gsWUFBQTtRQUFBLENBQUEsR0FBTyxLQUFLLENBQUMsV0FBTixDQUFrQixJQUFsQixDQUFILEdBQWdDLEdBQWhDLEdBQXlDO2VBQzdDLElBQUksQ0FBQyxPQUFMLENBQWEsSUFBYixFQUFtQixDQUFuQjtNQUZXLENBTGY7S0FwQ00sRUE2Q047TUFDRSxJQUFBLEVBQU0sQ0FBQyxZQUFELENBRFI7TUFFRSxLQUFBLEVBQU8sZ0JBRlQ7TUFHRSxRQUFBLEVBQVUsU0FBQyxNQUFELEVBQVMsSUFBVCxFQUFlLE1BQWY7ZUFBNkIsTUFBRCxHQUFRO01BQXBDLENBSFo7TUFJRSxXQUFBLEVBQWEsU0FBQyxJQUFEO2VBQVU7TUFBVixDQUpmO0tBN0NNOzs7RUFxRFIsTUFBTSxDQUFDLE9BQVAsR0FDTTtJQUNTLGtCQUFDLElBQUQ7TUFDWCxJQUFDLENBQUEsSUFBRCxHQUFRO01BQ1IsSUFBQyxDQUFBLElBQUQsR0FBUTtNQUNSLElBQUMsQ0FBQSxJQUFELEdBQVE7TUFDUixJQUFDLENBQUEsV0FBRCxHQUFlO01BQ2YsSUFBQyxDQUFBLElBQUQsR0FBUTtNQUNSLElBQUMsQ0FBQSxNQUFELEdBQVU7TUFDVixJQUFDLENBQUEsUUFBRCxHQUFZO01BRVosSUFBQyxDQUFBLFNBQUQsQ0FBQTtJQVRXOzt1QkFXYixTQUFBLEdBQVcsU0FBQTtBQUNULFVBQUE7QUFBQTtXQUFBLHVDQUFBOztRQUNFLElBQUcsT0FBQSxHQUFVLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBWCxDQUFnQixJQUFDLENBQUEsSUFBakIsQ0FBYjtVQUNFLElBQUMsQ0FBQSxJQUFELEdBQVE7VUFDUixJQUFDLENBQUEsTUFBRCxHQUFVLE9BQVEsQ0FBQSxDQUFBO1VBQ2xCLElBQUMsQ0FBQSxJQUFELEdBQVEsT0FBUSxDQUFBLENBQUE7VUFDaEIsSUFBQyxDQUFBLFdBQUQsR0FBZSxJQUFJLENBQUMsV0FBTCxDQUFpQixPQUFRLENBQUEsQ0FBQSxDQUF6QjtVQUNmLElBQUMsQ0FBQSxNQUFELEdBQWEsT0FBTyxDQUFDLE1BQVIsSUFBa0IsQ0FBckIsR0FBNEIsT0FBUSxDQUFBLENBQUEsQ0FBcEMsR0FBNEM7VUFDdEQsSUFBQyxDQUFBLElBQUQsR0FBUSxPQUFRLENBQUEsT0FBTyxDQUFDLE1BQVIsR0FBZSxDQUFmO1VBQ2hCLElBQUMsQ0FBQSxRQUFELEdBQVksQ0FBQyxJQUFJLENBQUMsUUFBTCxJQUFpQixJQUFJLENBQUMsUUFBdkIsQ0FBZ0MsQ0FBQyxJQUFqQyxDQUFzQyxJQUF0QyxFQUE0QyxJQUFDLENBQUEsTUFBN0MsRUFBcUQsSUFBQyxDQUFBLElBQXRELEVBQTRELElBQUMsQ0FBQSxNQUE3RDtBQUNaLGdCQVJGO1NBQUEsTUFBQTsrQkFBQTs7QUFERjs7SUFEUzs7dUJBWVgsUUFBQSxHQUFVLFNBQUMsSUFBRDthQUFVLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBTixDQUFlLElBQUMsQ0FBQSxNQUFoQixFQUF3QixJQUF4QixFQUE4QixJQUFDLENBQUEsTUFBL0I7SUFBVjs7dUJBRVYsVUFBQSxHQUFZLFNBQUE7YUFBRyxJQUFDLENBQUEsSUFBRCxJQUFTLElBQUMsQ0FBQSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQVgsQ0FBbUIsTUFBbkIsQ0FBQSxLQUE4QixDQUFDO0lBQTNDOzt1QkFDWixNQUFBLEdBQVEsU0FBQyxJQUFEO2FBQVUsSUFBQyxDQUFBLElBQUQsSUFBUyxJQUFDLENBQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFYLENBQW1CLE1BQW5CLENBQUEsS0FBOEIsQ0FBQyxDQUF4QyxJQUE2QyxDQUFDLENBQUMsSUFBRCxJQUFTLElBQUMsQ0FBQSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQVgsQ0FBbUIsSUFBbkIsQ0FBQSxLQUE0QixDQUFDLENBQXZDO0lBQXZEOzt1QkFDUixZQUFBLEdBQWMsU0FBQTthQUFHLENBQUMsQ0FBQyxJQUFDLENBQUE7SUFBTjs7dUJBQ2QsV0FBQSxHQUFhLFNBQUE7YUFBRyxDQUFDLElBQUMsQ0FBQTtJQUFMOzt1QkFDYixVQUFBLEdBQVksU0FBQTthQUFHLENBQUMsQ0FBQyxJQUFDLENBQUEsTUFBSCxJQUFhLElBQUMsQ0FBQSxNQUFNLENBQUMsTUFBUixHQUFpQjtJQUFqQzs7SUFJWixRQUFDLENBQUEsTUFBRCxHQUFTLFNBQUMsSUFBRDthQUFVLGFBQWEsQ0FBQyxJQUFkLENBQW1CLElBQW5CLENBQUEsSUFBNEIsYUFBYSxDQUFDLElBQWQsQ0FBbUIsSUFBbkIsQ0FBNUIsSUFBd0QsYUFBYSxDQUFDLElBQWQsQ0FBbUIsSUFBbkI7SUFBbEU7O0lBQ1QsUUFBQyxDQUFBLGFBQUQsR0FBZ0IsU0FBQyxJQUFEO2FBQVUsYUFBYSxDQUFDLElBQWQsQ0FBbUIsSUFBbkIsQ0FBQSxJQUE0QixhQUFhLENBQUMsSUFBZCxDQUFtQixJQUFuQjtJQUF0Qzs7SUFDaEIsUUFBQyxDQUFBLGVBQUQsR0FBa0IsU0FBQyxJQUFEO2FBQVUsYUFBYSxDQUFDLElBQWQsQ0FBbUIsSUFBbkI7SUFBVjs7SUFDbEIsUUFBQyxDQUFBLE1BQUQsR0FBUzs7Ozs7QUExR1giLCJzb3VyY2VzQ29udGVudCI6WyJ1dGlscyA9IHJlcXVpcmUgXCIuLi91dGlsc1wiXG5cbkxJU1RfVUxfVEFTS19SRUdFWCA9IC8vLyBeIChcXHMqKSAoWyorLVxcLl0pIFxccysgXFxbW3hYXFwgXVxcXSBcXHMqICguKikgJCAvLy9cbkxJU1RfVUxfUkVHRVggICAgICA9IC8vLyBeIChcXHMqKSAoWyorLVxcLl0pIFxccysgKC4qKSAkIC8vL1xuTElTVF9PTF9UQVNLX1JFR0VYID0gLy8vIF4gKFxccyopIChcXGQrKShbXFwuXFwpXSkgXFxzKyBcXFtbeFhcXCBdXFxdIFxccyogKC4qKSAkIC8vL1xuTElTVF9PTF9SRUdFWCAgICAgID0gLy8vIF4gKFxccyopIChcXGQrKShbXFwuXFwpXSkgXFxzKyAoLiopICQgLy8vXG5MSVNUX0FMX1RBU0tfUkVHRVggPSAvLy8gXiAoXFxzKikgKFthLXpBLVpdKykoW1xcLlxcKV0pIFxccysgXFxbW3hYXFwgXVxcXSBcXHMqICguKikgJCAvLy9cbkxJU1RfQUxfUkVHRVggICAgICA9IC8vLyBeIChcXHMqKSAoW2EtekEtWl0rKShbXFwuXFwpXSkgXFxzKyAoLiopICQgLy8vXG5CTE9DS1FVT1RFX1JFR0VYICAgPSAvLy8gXiAoXFxzKikgKD4pIFxccyogKC4qKSAkIC8vL1xuXG5pbmNTdHIgPSAoc3RyKSAtPlxuICBudW0gPSBwYXJzZUludChzdHIsIDEwKVxuICBpZiBpc05hTihudW0pIHRoZW4gdXRpbHMuaW5jcmVtZW50Q2hhcnMoc3RyKVxuICBlbHNlIG51bSArIDFcblxuVFlQRVMgPSBbXG4gIHtcbiAgICBuYW1lOiBbXCJsaXN0XCIsIFwidWxcIiwgXCJ0YXNrXCJdLFxuICAgIHJlZ2V4OiBMSVNUX1VMX1RBU0tfUkVHRVgsXG4gICAgbGluZUhlYWQ6IChpbmRlbnQsIGhlYWQsIHN1ZmZpeCkgLT4gXCIje2luZGVudH0je2hlYWR9IFsgXSBcIlxuICAgIGRlZmF1bHRIZWFkOiAoaGVhZCkgLT4gaGVhZFxuICB9XG4gIHtcbiAgICBuYW1lOiBbXCJsaXN0XCIsIFwidWxcIl0sXG4gICAgcmVnZXg6IExJU1RfVUxfUkVHRVgsXG4gICAgbGluZUhlYWQ6IChpbmRlbnQsIGhlYWQsIHN1ZmZpeCkgLT4gXCIje2luZGVudH0je2hlYWR9IFwiXG4gICAgZGVmYXVsdEhlYWQ6IChoZWFkKSAtPiBoZWFkXG4gIH1cbiAge1xuICAgIG5hbWU6IFtcImxpc3RcIiwgXCJvbFwiLCBcInRhc2tcIl0sXG4gICAgcmVnZXg6IExJU1RfT0xfVEFTS19SRUdFWCxcbiAgICBsaW5lSGVhZDogKGluZGVudCwgaGVhZCwgc3VmZml4KSAtPiBcIiN7aW5kZW50fSN7aGVhZH0je3N1ZmZpeH0gWyBdIFwiXG4gICAgbmV4dExpbmU6IChpbmRlbnQsIGhlYWQsIHN1ZmZpeCkgLT4gXCIje2luZGVudH0je2luY1N0cihoZWFkKX0je3N1ZmZpeH0gWyBdIFwiXG4gICAgZGVmYXVsdEhlYWQ6IChoZWFkKSAtPiBcIjFcIlxuICB9XG4gIHtcbiAgICBuYW1lOiBbXCJsaXN0XCIsIFwib2xcIl0sXG4gICAgcmVnZXg6IExJU1RfT0xfUkVHRVgsXG4gICAgbGluZUhlYWQ6IChpbmRlbnQsIGhlYWQsIHN1ZmZpeCkgLT4gXCIje2luZGVudH0je2hlYWR9I3tzdWZmaXh9IFwiXG4gICAgbmV4dExpbmU6IChpbmRlbnQsIGhlYWQsIHN1ZmZpeCkgLT4gXCIje2luZGVudH0je2luY1N0cihoZWFkKX0je3N1ZmZpeH0gXCJcbiAgICBkZWZhdWx0SGVhZDogKGhlYWQpIC0+IFwiMVwiXG4gIH1cbiAge1xuICAgIG5hbWU6IFtcImxpc3RcIiwgXCJvbFwiLCBcImFsXCIsIFwidGFza1wiXSxcbiAgICByZWdleDogTElTVF9BTF9UQVNLX1JFR0VYLFxuICAgIGxpbmVIZWFkOiAoaW5kZW50LCBoZWFkLCBzdWZmaXgpIC0+IFwiI3tpbmRlbnR9I3toZWFkfSN7c3VmZml4fSBbIF0gXCJcbiAgICBuZXh0TGluZTogKGluZGVudCwgaGVhZCwgc3VmZml4KSAtPiBcIiN7aW5kZW50fSN7aW5jU3RyKGhlYWQpfSN7c3VmZml4fSBbIF0gXCJcbiAgICBkZWZhdWx0SGVhZDogKGhlYWQpIC0+XG4gICAgICBjID0gaWYgdXRpbHMuaXNVcHBlckNhc2UoaGVhZCkgdGhlbiBcIkFcIiBlbHNlIFwiYVwiXG4gICAgICBoZWFkLnJlcGxhY2UoLy4vZywgYylcbiAgfVxuICB7XG4gICAgbmFtZTogW1wibGlzdFwiLCBcIm9sXCIsIFwiYWxcIl0sXG4gICAgcmVnZXg6IExJU1RfQUxfUkVHRVgsXG4gICAgbGluZUhlYWQ6IChpbmRlbnQsIGhlYWQsIHN1ZmZpeCkgLT4gXCIje2luZGVudH0je2hlYWR9I3tzdWZmaXh9IFwiXG4gICAgbmV4dExpbmU6IChpbmRlbnQsIGhlYWQsIHN1ZmZpeCkgLT4gXCIje2luZGVudH0je2luY1N0cihoZWFkKX0je3N1ZmZpeH0gXCJcbiAgICBkZWZhdWx0SGVhZDogKGhlYWQpIC0+XG4gICAgICBjID0gaWYgdXRpbHMuaXNVcHBlckNhc2UoaGVhZCkgdGhlbiBcIkFcIiBlbHNlIFwiYVwiXG4gICAgICBoZWFkLnJlcGxhY2UoLy4vZywgYylcbiAgfVxuICB7XG4gICAgbmFtZTogW1wiYmxvY2txdW90ZVwiXSxcbiAgICByZWdleDogQkxPQ0tRVU9URV9SRUdFWCxcbiAgICBsaW5lSGVhZDogKGluZGVudCwgaGVhZCwgc3VmZml4KSAtPiBcIiN7aW5kZW50fT4gXCJcbiAgICBkZWZhdWx0SGVhZDogKGhlYWQpIC0+IFwiPlwiXG4gIH1cbl1cblxubW9kdWxlLmV4cG9ydHMgPVxuY2xhc3MgTGluZU1ldGFcbiAgY29uc3RydWN0b3I6IChsaW5lKSAtPlxuICAgIEBsaW5lID0gbGluZVxuICAgIEB0eXBlID0gdW5kZWZpbmVkXG4gICAgQGhlYWQgPSBcIlwiXG4gICAgQGRlZmF1bHRIZWFkID0gXCJcIlxuICAgIEBib2R5ID0gXCJcIlxuICAgIEBpbmRlbnQgPSBcIlwiXG4gICAgQG5leHRMaW5lID0gXCJcIlxuXG4gICAgQF9maW5kTWV0YSgpXG5cbiAgX2ZpbmRNZXRhOiAtPlxuICAgIGZvciB0eXBlIGluIFRZUEVTXG4gICAgICBpZiBtYXRjaGVzID0gdHlwZS5yZWdleC5leGVjKEBsaW5lKVxuICAgICAgICBAdHlwZSA9IHR5cGVcbiAgICAgICAgQGluZGVudCA9IG1hdGNoZXNbMV1cbiAgICAgICAgQGhlYWQgPSBtYXRjaGVzWzJdXG4gICAgICAgIEBkZWZhdWx0SGVhZCA9IHR5cGUuZGVmYXVsdEhlYWQobWF0Y2hlc1syXSlcbiAgICAgICAgQHN1ZmZpeCA9IGlmIG1hdGNoZXMubGVuZ3RoID49IDQgdGhlbiBtYXRjaGVzWzNdIGVsc2UgXCJcIlxuICAgICAgICBAYm9keSA9IG1hdGNoZXNbbWF0Y2hlcy5sZW5ndGgtMV1cbiAgICAgICAgQG5leHRMaW5lID0gKHR5cGUubmV4dExpbmUgfHwgdHlwZS5saW5lSGVhZCkuY2FsbChudWxsLCBAaW5kZW50LCBAaGVhZCwgQHN1ZmZpeClcbiAgICAgICAgYnJlYWtcblxuICBsaW5lSGVhZDogKGhlYWQpIC0+IEB0eXBlLmxpbmVIZWFkKEBpbmRlbnQsIGhlYWQsIEBzdWZmaXgpXG5cbiAgaXNUYXNrTGlzdDogLT4gQHR5cGUgJiYgQHR5cGUubmFtZS5pbmRleE9mKFwidGFza1wiKSAhPSAtMVxuICBpc0xpc3Q6ICh0eXBlKSAtPiBAdHlwZSAmJiBAdHlwZS5uYW1lLmluZGV4T2YoXCJsaXN0XCIpICE9IC0xICYmICghdHlwZSB8fCBAdHlwZS5uYW1lLmluZGV4T2YodHlwZSkgIT0gLTEpXG4gIGlzQ29udGludW91czogLT4gISFAbmV4dExpbmVcbiAgaXNFbXB0eUJvZHk6IC0+ICFAYm9keVxuICBpc0luZGVudGVkOiAtPiAhIUBpbmRlbnQgJiYgQGluZGVudC5sZW5ndGggPiAwXG5cbiAgIyBTdGF0aWMgbWV0aG9kc1xuXG4gIEBpc0xpc3Q6IChsaW5lKSAtPiBMSVNUX1VMX1JFR0VYLnRlc3QobGluZSkgfHwgTElTVF9PTF9SRUdFWC50ZXN0KGxpbmUpIHx8IExJU1RfQUxfUkVHRVgudGVzdChsaW5lKVxuICBAaXNPcmRlcmVkTGlzdDogKGxpbmUpIC0+IExJU1RfT0xfUkVHRVgudGVzdChsaW5lKSB8fCBMSVNUX0FMX1JFR0VYLnRlc3QobGluZSlcbiAgQGlzVW5vcmRlcmVkTGlzdDogKGxpbmUpIC0+IExJU1RfVUxfUkVHRVgudGVzdChsaW5lKVxuICBAaW5jU3RyOiBpbmNTdHJcbiJdfQ==
